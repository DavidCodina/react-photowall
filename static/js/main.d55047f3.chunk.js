(this.webpackJsonpphotowall=this.webpackJsonpphotowall||[]).push([[0],{38:function(e,t,n){e.exports=n(60)},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"loadPhotos",(function(){return T})),n.d(o,"startLoadingPhotos",(function(){return L})),n.d(o,"addPhoto",(function(){return M})),n.d(o,"startAddingPhoto",(function(){return I})),n.d(o,"deletePhoto",(function(){return R})),n.d(o,"startDeletingPhoto",(function(){return H}));var r={};n.r(r),n.d(r,"loadComments",(function(){return X})),n.d(r,"startLoadingComments",(function(){return x})),n.d(r,"addComment",(function(){return z})),n.d(r,"startAddingComment",(function(){return F}));var a=n(0),c=n.n(a),i=n(24),u=n.n(i),l=n(12),s=n(26),p=n(9),m=n(35),d=n(27),f=n(10);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O={photos:[]};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={comments:{}},E=Object(p.c)({photoReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DELETE_PHOTO":return b({},e,{photos:e.photos.filter((function(e){return e.id!==t.payload}))});case"ADD_PHOTO":return b({},e,{photos:[t.payload].concat(Object(d.a)(e.photos))});case"LOAD_PHOTOS":return b({},e,{photos:t.payload});default:return e}},commentReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMMENT":return e.comments[t.payload.id]?y({},e,{comments:y({},e.comments,Object(f.a)({},t.payload.id,[].concat(Object(d.a)(e.comments[t.payload.id]),[t.payload.comment])))}):y({},e,{comments:y({},e.comments,Object(f.a)({},t.payload.id,[t.payload.comment]))});case"LOAD_COMMENTS":return y({},e,{comments:t.payload});default:return e}}}),j=[m.a],P=Object(p.e)(E,{},Object(p.d)(p.a.apply(void 0,j),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),D=n(14),w=n(15),S=n(17),N=n(16),C=n(18),_=n(19),k=n(30);k.initializeApp({apiKey:"AIzaSyCCiheMWXi-iio38Tqg4oXGWTH3OSzv5DY",authDomain:"photowall-38074.firebaseapp.com",databaseURL:"https://photowall-38074.firebaseio.com",projectId:"photowall-38074",storageBucket:"",messagingSenderId:"380688214458",appId:"1:380688214458:web:926ae6b558ce60c86b1583"});var A=k.database(),T=function(e){return{type:"LOAD_PHOTOS",payload:e}},L=function(){return function(e){return console.log("database"),console.log(A),A.ref("photos").once("value").then((function(t){var n=[];t.forEach((function(e){n.push(e.val())})),e(T(n))})).catch((function(e){console.log(e)}))}},M=function(e){return{type:"ADD_PHOTO",payload:e}},I=function(e){return function(t){return A.ref("photos").update(Object(f.a)({},e.id,e)).then((function(){t(M(e))})).catch((function(e){console.log(e)}))}},R=function(e){return{type:"DELETE_PHOTO",payload:e}},H=function(e){return function(t){return A.ref("photos/".concat(e)).remove().then((function(){t(R(e))})).catch((function(e){console.log(e)}))}},X=function(e){return{type:"LOAD_COMMENTS",payload:e}},x=function(){return function(e){return A.ref("comments").once("value").then((function(t){var n={};t.forEach((function(e){n[e.key]=Object.values(e.val())})),e(X(n))})).catch((function(e){console.log(e)}))}},z=function(e,t){return{type:"ADD_COMMENT",payload:{id:t,comment:e}}},F=function(e,t){return function(n){return A.ref("comments/".concat(t)).push(e).then((function(){n(z(e,t))})).catch((function(e){console.log(e)}))}};var U=function(e){var t=e.photo,n=e.startDeletingPhoto;return c.a.createElement("figure",{className:"figure"},c.a.createElement(l.b,{to:"/single/".concat(t.id)},c.a.createElement("img",{className:"photo",src:t.imageLink,alt:t.description})),c.a.createElement("figcaption",null,t.description),c.a.createElement("div",{className:"button-container"},c.a.createElement("button",{className:"button",onClick:function(){n(t.id),e.history&&e.history.push("/")}}," Remove "),c.a.createElement(l.b,{className:"button",to:"/single/".concat(t.id)},c.a.createElement("div",{className:"comment-count"},c.a.createElement("div",{className:"speech-bubble"}),e.comments[t.id]?e.comments[t.id].length:0))))};var B=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(l.b,{className:"plus-button",to:"/addphoto"}),c.a.createElement("div",{className:"photo-container"},e.photos.sort((function(e,t){return t.id-e.id})).map((function(t,n){return c.a.createElement(U,Object.assign({key:n,photo:t},e))}))))},J=function(e){function t(){var e,n;Object(D.a)(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(S.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault();var t=e.target.elements.description.value,o=e.target.elements.link.value,r={id:Number(new Date),description:t,imageLink:o};console.log(r),o&&t&&(n.props.startAddingPhoto(r),n.props.history.push("/"))},n}return Object(C.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"addphoto-form-container"},c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("input",{type:"text",name:"link",placeholder:"Image link..."}),c.a.createElement("input",{type:"text",name:"description",placeholder:"Description..."}),c.a.createElement("button",{className:"form-button"},"Submit"))))}}]),t}(a.Component),V=function(e){function t(){var e,n;Object(D.a)(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(S.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault();var t=e.target.elements.comment.value;n.props.startAddingComment(t,n.props.id),e.target.elements.comment.value=""},n}return Object(C.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"comment"},this.props.photoSpecificComments.map((function(e,t){return c.a.createElement("p",{key:t}," ",e," ")})),c.a.createElement("form",{className:"comment-form",onSubmit:this.handleSubmit},c.a.createElement("input",{type:"text",placeholder:"Comment on image...",name:"comment"}),c.a.createElement("input",{type:"submit",hidden:!0})))}}]),t}(a.Component),W=function(e){function t(){return Object(D.a)(this,t),Object(S.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props,t=e.match,n=e.photos,o=e.comments,r=e.loading,a=Number(t.params.id),i=n.find((function(e){return e.id===a})),u=o[a]||[];return!0===r?c.a.createElement("div",{className:"loader"},"Loading..."):i?c.a.createElement("main",null,c.a.createElement("div",{className:"single-photo-container"},c.a.createElement(U,Object.assign({photo:i},this.props)),c.a.createElement(V,{startAddingComment:this.props.startAddingComment,photoSpecificComments:u,id:a}))):c.a.createElement("h2",{className:"no-photo-found"},"...no photo found.")}}]),t}(a.Component);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var G=function(e){function t(){var e,n;Object(D.a)(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(S.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},n}return Object(C.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.startLoadingPhotos().then((function(){e.setState({loading:!1})})),this.props.startLoadingComments()}},{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement("header",null,c.a.createElement("h1",null,c.a.createElement(l.b,{to:"/"},"Photowall>"))),c.a.createElement(_.a,{exact:!0,path:"/",render:function(){return c.a.createElement("div",null,c.a.createElement(B,e.props))}}),c.a.createElement(_.a,{path:"/addphoto",render:function(t){var n=t.history;return c.a.createElement(J,Object.assign({},e.props,{history:n}))}}),c.a.createElement(_.a,{path:"/single/:id",render:function(t){return c.a.createElement(W,Object.assign({loading:e.state.loading},e.props,t))}}))}}]),t}(a.Component);var K=Object(s.b)((function(e){return{photos:e.photoReducer.photos,comments:e.commentReducer.comments}}),(function(e){return Object(p.b)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o,{},r),e)}))(G);n(59);u.a.render(c.a.createElement(s.a,{store:P},c.a.createElement(l.a,null,c.a.createElement(K,null))),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.d55047f3.chunk.js.map